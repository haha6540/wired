<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.gr.wired.board.model.BoardDAO">

	<insert id="insertBoard" parameterType="boardVo">
		<selectKey keyProperty="boardNo" resultType="int" order="BEFORE">
			SELECT BOARD_SEQ.NEXTVAL FROM DUAL
		</selectKey>
		INSERT INTO BOARD(BOARD_NO, MEM_NO, BDLIST_NO, BOARD_TITLE, BOARD_CONTENT,
			BOARD_FILENAME, BOARD_FILESIZE, BOARD_ORIGINALFILENAME)
		VALUES(#{boardNo}, #{memNo}, #{bdlistNo}, #{boardTitle}, #{boardContent},
			#{boardFilename}, #{boardFilesize}, #{boardOriginalfilename})
	</insert>

	<select id="selectByMemId" parameterType="String" resultType="int">
		SELECT MEM_NO FROM MEMBER WHERE MEM_ID LIKE #{memId}
	</select>

	<select id="selectByBNoList" parameterType="int" resultType="map">
		SELECT BOARD_NO ,BOARD_TITLE, BOARD_REGDATE, BOARD_READCOUNT, BOARD_RECOMMEND, BOARD_FILENAME,
		    (SELECT MEM_NAME FROM MEMBER M WHERE B.MEM_NO=M.MEM_NO)MEM_NAME
		FROM BOARD B
		WHERE BDLIST_NO=#{bdlistNo}
		ORDER BY BOARD_REGDATE DESC
	</select>
	<select id="selectTotalRecord" parameterType="int" resultType="int">
		SELECT COUNT(*) FROM BOARD
		WHERE BDLIST_NO=#{bdlistNo}
	</select>
	<select id="selectByNo" parameterType="int" resultType="boardVo">
		SELECT B.*, (SELECT MEM_NAME FROM MEMBER M WHERE B.MEM_NO=M.MEM_NO)MEM_NAME
		FROM BOARD B
		WHERE BOARD_NO=#{boardNo}
	</select>
</mapper>